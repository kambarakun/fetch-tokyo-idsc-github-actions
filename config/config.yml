# 東京都感染症発生動向データ収集設定ファイル

# スケジュール設定
schedule:
  cron: "0 10 * * 1" # 毎週月曜日 19:00 JST (10:00 UTC)
  timezone: "Asia/Tokyo"
  manual_trigger_enabled: true

# データ収集設定
collection:
  incremental_mode: true # 増分収集モード（既存データをスキップ）
  batch_size: 50 # 一度に処理するファイル数
  start_year: 2024 # デフォルトの開始年（初回は2000年から実行推奨）
  end_year: null # null の場合は現在年
  data_types:
    - sentinel_weekly_gender
    - sentinel_weekly_age
    - sentinel_weekly_health_center
    - sentinel_weekly_medical_district
    - sentinel_monthly_gender
    - sentinel_monthly_age
    - sentinel_monthly_health_center
    - sentinel_monthly_medical_district
    - notifiable_weekly
  retry_failed: true
  max_execution_time_hours: 5.5 # GitHub Actions の6時間制限対策

# ストレージ設定
storage:
  base_directory: "data/raw"
  processed_directory: "data/processed"
  log_directory: "data/logs"
  directory_structure: "{year}/{month}/week_{week}" # ディレクトリ構造
  auto_commit: true
  commit_message_template: "データ更新: {data_type} - {date_range}"
  keep_shift_jis: true # Shift_JIS エンコーディングを維持

# 品質管理設定
quality:
  file_size_limits:
    csv: [100, 10485760] # 100B - 10MB
  anomaly_detection_enabled: true
  anomaly_threshold: 0.3
  quarantine_enabled: true
  quarantine_directory: "data/quarantine"

# 通知設定
notifications:
  github_issues_enabled: true
  create_issue_on_error: true
  create_issue_on_anomaly: false # 異常検出時のIssue作成（初期は無効）
  issue_labels:
    - data-collection
    - automated
  max_issues_per_day: 10

# データタイプ詳細設定
data_types:
  - name: sentinel_weekly_gender
    enabled: true
    fetch_method: fetch_csv_sentinel_weekly_gender
    epid_code: "00"

  - name: sentinel_weekly_age
    enabled: true
    fetch_method: fetch_csv_sentinel_weekly_age
    epid_code: "00"

  - name: sentinel_weekly_health_center
    enabled: true
    fetch_method: fetch_csv_sentinel_weekly_health_center
    epid_code: ""

  - name: sentinel_weekly_medical_district
    enabled: true
    fetch_method: fetch_csv_sentinel_weekly_medical_district
    epid_code: ""

  - name: sentinel_monthly_gender
    enabled: true
    fetch_method: fetch_csv_sentinel_monthly_gender
    epid_code: "00"

  - name: sentinel_monthly_age
    enabled: true
    fetch_method: fetch_csv_sentinel_monthly_age
    epid_code: "00"

  - name: sentinel_monthly_health_center
    enabled: true
    fetch_method: fetch_csv_sentinel_monthly_health_center
    epid_code: ""

  - name: sentinel_monthly_medical_district
    enabled: true
    fetch_method: fetch_csv_sentinel_monthly_medical_district
    epid_code: ""

  - name: notifiable_weekly
    enabled: true
    fetch_method: fetch_csv_notifiable_weekly
    epid_code: ""
